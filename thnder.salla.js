const _0x3b21b0=_0x2e1a;function _0x1e47(){const _0x2f6499=['Error\x20in\x20window\x20load\x20handler:','16KvrgFn','undefined','replace','jid','toLowerCase','key','Error\x20in\x20getCustomerData','POST','stack','randomUUID','Error\x20in\x20storage\x20event\x20handler:','Error\x20in\x20sessionStorage','Error\x20parsing\x20user\x20data\x20from\x20localStorage:','1621992ZGgODa','href','phoneNumber','location','mobile','error','message','land','6rLVOMt','reduce','918TLXMnl','419613kMYlJy','toISOString','email','getItem','Failed\x20to\x20handle\x20or\x20send\x20the\x20data:','direct\x20visit','landing','application/json','2330923ooTSck','stringify','utms','removeItem','xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx','customerData','setItem','https://account.thnderapp.com/api/thnder/error','24fFRTZR','random','https://account.thnderapp.com/api/thnder/salla','869847RdFXZG','Failed\x20to\x20report\x20error:','addEventListener','36077RSCXXy','localStorage','6310FgWmfP','toString','Error\x20in\x20storage\x20event\x20handler','Error\x20in\x20top-level\x20code:','Error\x20parsing\x20stored\x20customer\x20data\x20from\x20sessionStorage:','Web\x20Storage\x20API\x20unavailable','Attempt\x20','user','log','Error\x20in\x20localStorage','8RaknXu','Error\x20in\x20postEventData','match','parse','uid','referrer','1283995uBkmsa','\x20failed:','Failed\x20to\x20send\x20event\x20data:'];_0x1e47=function(){return _0x2f6499;};return _0x1e47();}function _0x2e1a(_0x5d5fe3,_0x577131){const _0x1e472e=_0x1e47();return _0x2e1a=function(_0x2e1af1,_0x2f5765){_0x2e1af1=_0x2e1af1-0xce;let _0xcea520=_0x1e472e[_0x2e1af1];return _0xcea520;},_0x2e1a(_0x5d5fe3,_0x577131);}(function(_0x1308ca,_0x11cab4){const _0x2a2789=_0x2e1a,_0x26a7a6=_0x1308ca();while(!![]){try{const _0x5affca=-parseInt(_0x2a2789(0x104))/0x1*(parseInt(_0x2a2789(0xd6))/0x2)+-parseInt(_0x2a2789(0xee))/0x3*(-parseInt(_0x2a2789(0x110))/0x4)+-parseInt(_0x2a2789(0xd2))/0x5*(parseInt(_0x2a2789(0xeb))/0x6)+parseInt(_0x2a2789(0xf6))/0x7+parseInt(_0x2a2789(0xe3))/0x8+parseInt(_0x2a2789(0xed))/0x9*(parseInt(_0x2a2789(0x106))/0xa)+-parseInt(_0x2a2789(0x101))/0xb*(parseInt(_0x2a2789(0xfe))/0xc);if(_0x5affca===_0x11cab4)break;else _0x26a7a6['push'](_0x26a7a6['shift']());}catch(_0x160ec2){_0x26a7a6['push'](_0x26a7a6['shift']());}}}(_0x1e47,0x2b091));const reportErrorToServer=async _0x29f3f1=>{const _0x589d85=_0x2e1a;try{await fetch(_0x589d85(0xfd),{'method':_0x589d85(0xdd),'headers':{'Content-Type':_0x589d85(0xf5)},'body':JSON[_0x589d85(0xf7)]({'timestamp':new Date()[_0x589d85(0xef)](),..._0x29f3f1,'url':window[_0x589d85(0xe6)][_0x589d85(0xe4)]})});}catch(_0x47e618){console[_0x589d85(0xe8)](_0x589d85(0x102),_0x47e618);}},generateUUID=()=>{const _0x26efcb=_0x2e1a;if(typeof crypto!==_0x26efcb(0xd7)&&crypto[_0x26efcb(0xdf)])return crypto['randomUUID']();return _0x26efcb(0xfa)['replace'](/[xy]/g,_0x3eb733=>{const _0x50b5de=_0x26efcb,_0x592dd9=Math[_0x50b5de(0xff)]()*0x10|0x0,_0x44c592=_0x3eb733==='x'?_0x592dd9:_0x592dd9&0x3|0x8;return _0x44c592[_0x50b5de(0x107)](0x10);});},isStorageAvailable=_0xbad986=>{const _0x31cc52=_0x2e1a;try{const _0x7520ba=window[_0xbad986],_0x5e5e5c='__test__';return _0x7520ba[_0x31cc52(0xfc)](_0x5e5e5c,_0x5e5e5c),_0x7520ba[_0x31cc52(0xf9)](_0x5e5e5c),!![];}catch(_0x339d09){return![];}},getCustomerData=()=>{const _0x5e3cd9=_0x2e1a;!isStorageAvailable(_0x5e3cd9(0x105))&&reportErrorToServer({'message':_0x5e3cd9(0x10f),'error':error[_0x5e3cd9(0xe9)],'stack':error['stack']});try{const _0x1cd5e9=JSON[_0x5e3cd9(0xcf)](localStorage[_0x5e3cd9(0xf1)](_0x5e3cd9(0x10d)));if(_0x1cd5e9?.['id']||_0x1cd5e9?.[_0x5e3cd9(0xf0)]||_0x1cd5e9?.[_0x5e3cd9(0xe7)])return{'id':_0x1cd5e9?.['id'],'email':_0x1cd5e9[_0x5e3cd9(0xf0)]?.[_0x5e3cd9(0xda)](),'phoneNumber':_0x1cd5e9?.[_0x5e3cd9(0xe7)]};}catch(_0x1f7f69){console[_0x5e3cd9(0xe8)](_0x5e3cd9(0xe2),_0x1f7f69),reportErrorToServer({'message':_0x5e3cd9(0xdc),'error':_0x1f7f69[_0x5e3cd9(0xe9)],'stack':_0x1f7f69[_0x5e3cd9(0xde)]});}return null;},getStoredCustomerData=()=>{const _0x382b71=_0x2e1a;!isStorageAvailable('sessionStorage')&&reportErrorToServer({'message':_0x382b71(0xe1),'error':error[_0x382b71(0xe9)],'stack':error[_0x382b71(0xde)]});try{const _0x4a9404=sessionStorage[_0x382b71(0xf1)](_0x382b71(0xfb));return _0x4a9404?JSON[_0x382b71(0xcf)](_0x4a9404):null;}catch(_0x33c58c){return console[_0x382b71(0xe8)](_0x382b71(0x10a),_0x33c58c),reportErrorToServer({'message':'Error\x20in\x20getStoredCustomerData','error':_0x33c58c[_0x382b71(0xe9)],'stack':_0x33c58c[_0x382b71(0xde)]}),null;}},setStoredCustomerData=_0x2e8347=>{const _0x3306ee=_0x2e1a;_0x2e8347?sessionStorage[_0x3306ee(0xfc)](_0x3306ee(0xfb),JSON[_0x3306ee(0xf7)](_0x2e8347)):sessionStorage[_0x3306ee(0xf9)](_0x3306ee(0xfb));},getJid=()=>sessionStorage['getItem'](_0x3b21b0(0xd9)),setJid=_0x254bdb=>sessionStorage['setItem'](_0x3b21b0(0xd9),_0x254bdb),getUtms=()=>{const _0x445f1a=_0x3b21b0,_0x1c8b4d=sessionStorage[_0x445f1a(0xf1)](_0x445f1a(0xf8));return _0x1c8b4d?JSON['parse'](_0x1c8b4d):null;},setUtms=_0x214e45=>sessionStorage[_0x3b21b0(0xfc)](_0x3b21b0(0xf8),JSON['stringify'](_0x214e45)),getLand=()=>{const _0x5ca015=_0x3b21b0;return sessionStorage['getItem'](_0x5ca015(0xea));},setLand=_0x5edc76=>{const _0x5d7033=_0x3b21b0;sessionStorage['setItem'](_0x5d7033(0xea),_0x5edc76);};try{let uid=localStorage['getItem'](_0x3b21b0(0xd0));!uid&&(uid=generateUUID(),localStorage[_0x3b21b0(0xfc)]('uid',uid));const getDomainFromUrl=_0x4bb03c=>{const _0x3c3bb3=_0x3b21b0;if(!_0x4bb03c)return'';try{const {hostname:_0x45fd02,pathname:_0x303b3e}=new URL(_0x4bb03c);let _0x4c4e31=_0x45fd02[_0x3c3bb3(0xd8)](/^www\./,'');if(_0x4c4e31==='salla.sa'){const _0x1459a0=_0x303b3e[_0x3c3bb3(0xce)](/^\/([^\/]+)/);_0x1459a0&&(_0x4c4e31=_0x1459a0[0x1]);}return _0x4c4e31;}catch(_0x40c190){return console[_0x3c3bb3(0xe8)]('Invalid\x20URL\x20provided:',_0x4bb03c),'';}},retrieveAdditionalParameters=()=>{const _0x3f5564=_0x3b21b0;return[...new URLSearchParams(window[_0x3f5564(0xe6)]['search'])['entries']()][_0x3f5564(0xec)]((_0x448173,[_0x40c6fe,_0x347d10])=>({..._0x448173,[_0x40c6fe[_0x3f5564(0xda)]()]:_0x347d10[_0x3f5564(0xda)]()}),{});};let jid=getJid(),utms=getUtms(),newUtms=retrieveAdditionalParameters(),pageLanded=getLand();const domain=getDomainFromUrl(window[_0x3b21b0(0xe6)][_0x3b21b0(0xe4)]),combinedUid=uid+'_'+domain;if(!jid||!utms||!pageLanded){setUtms(newUtms),jid=generateUUID(),setJid(jid),setLand(![]);const customer=getCustomerData();customer&&setStoredCustomerData(customer);}const fetchWithRetry=async(_0x426876,_0x6c2216,_0x369b02=0x9c4)=>{const _0x15b9f2=_0x3b21b0;let _0x59b3b0=0x0;while(!![]){try{const _0x27dc29=await fetch(_0x426876,_0x6c2216);if(_0x27dc29['ok'])return _0x27dc29;}catch(_0x1b46d1){console[_0x15b9f2(0x10e)](_0x15b9f2(0x10c)+(_0x59b3b0+0x1)+_0x15b9f2(0xd3),_0x1b46d1);}await new Promise(_0x560b5e=>setTimeout(_0x560b5e,_0x369b02)),_0x59b3b0++;}},postEventData=async(_0x3aedfd,_0x5ec314)=>{const _0x5dda92=_0x3b21b0;try{const _0x144723=getCustomerData(),_0x22e60b=getStoredCustomerData();if(_0x5ec314==='landing'&&pageLanded&&(JSON[_0x5dda92(0xf7)](_0x22e60b)===JSON[_0x5dda92(0xf7)](_0x144723)||!_0x144723))return;let _0x2d238a=document[_0x5dda92(0xd1)],_0x2d963d=_0x2d238a?getDomainFromUrl(_0x2d238a):_0x5dda92(0xf3),_0x6aaa3a=getDomainFromUrl(window[_0x5dda92(0xe6)][_0x5dda92(0xe4)]);_0x2d963d===_0x6aaa3a&&(_0x2d963d=_0x5dda92(0xf3));_0x5ec314===_0x5dda92(0xf4)&&setLand(!![]);const _0x57e34b={'eventType':_0x5ec314,'domain':_0x6aaa3a,'uid':combinedUid,'jid':jid,'referrer':_0x2d963d,'additionalParams':retrieveAdditionalParameters(),'customer':_0x144723,..._0x3aedfd};try{await fetchWithRetry(_0x5dda92(0x100),{'method':_0x5dda92(0xdd),'headers':{'Content-Type':'application/json'},'body':JSON[_0x5dda92(0xf7)](_0x57e34b)});}catch(_0xba684e){console['error'](_0x5dda92(0xd4),_0xba684e),reportErrorToServer({'message':'Error\x20in\x20postEventData','error':_0xba684e[_0x5dda92(0xe9)],'stack':_0xba684e[_0x5dda92(0xde)]});}}catch(_0x44961b){console[_0x5dda92(0xe8)](_0x5dda92(0xf2),_0x44961b),reportErrorToServer({'message':_0x5dda92(0x111),'error':_0x44961b['message'],'stack':_0x44961b['stack']});}},checkUserLoginState=()=>{const _0x125146=_0x3b21b0,_0x33c0d1=getCustomerData(),_0x2275f5=getStoredCustomerData();if(_0x33c0d1&&!_0x2275f5)setStoredCustomerData(_0x33c0d1),postEventData({'additionalParams':retrieveAdditionalParameters()},'landing');else{if(_0x33c0d1&&_0x2275f5){const _0x51ab52=_0x2275f5['id']!==_0x33c0d1['id']||_0x2275f5[_0x125146(0xf0)]!==_0x33c0d1[_0x125146(0xf0)]||_0x2275f5[_0x125146(0xe5)]!==_0x33c0d1[_0x125146(0xe5)];_0x51ab52&&(setStoredCustomerData(_0x33c0d1),postEventData({'additionalParams':retrieveAdditionalParameters()},_0x125146(0xf4)));}else!_0x33c0d1&&_0x2275f5&&setStoredCustomerData(null);}};typeof Storage===_0x3b21b0(0xd7)&&reportErrorToServer({'message':_0x3b21b0(0x10b)}),window['addEventListener']('load',()=>{const _0x2bb1b7=_0x3b21b0;try{const _0x49ba80=retrieveAdditionalParameters();postEventData({'additionalParams':_0x49ba80},_0x2bb1b7(0xf4)),checkUserLoginState();}catch(_0xb49bc3){console[_0x2bb1b7(0xe8)](_0x2bb1b7(0xd5),_0xb49bc3),reportErrorToServer({'message':'Error\x20in\x20window\x20load\x20handler','error':_0xb49bc3[_0x2bb1b7(0xe9)],'stack':_0xb49bc3['stack']});}}),window[_0x3b21b0(0x103)]('storage',_0x1fccf5=>{const _0x57c8df=_0x3b21b0;try{if(_0x1fccf5[_0x57c8df(0xdb)]===_0x57c8df(0x10d)){const _0x959bc2=getCustomerData();_0x959bc2&&postEventData({'additionalParams':retrieveAdditionalParameters()},_0x57c8df(0xf4)),checkUserLoginState();}}catch(_0x25abd2){console[_0x57c8df(0xe8)](_0x57c8df(0xe0),_0x25abd2),reportErrorToServer({'message':_0x57c8df(0x108),'error':_0x25abd2[_0x57c8df(0xe9)],'stack':_0x25abd2['stack']});}});}catch(_0x59d7f0){console['error'](_0x3b21b0(0x109),_0x59d7f0),reportErrorToServer({'message':'Error\x20in\x20top-level\x20code','error':_0x59d7f0[_0x3b21b0(0xe9)],'stack':_0x59d7f0[_0x3b21b0(0xde)]});}